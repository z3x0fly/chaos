<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.H.A.O.S - Cyber Hacking & Offensive Security</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #00ff00;
            font-family: 'Courier New', monospace;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #00ff00;
            border-radius: 10px;
            background: rgba(0, 255, 0, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }
        
        .header h1 {
            font-size: 2.5em;
            text-shadow: 0 0 10px #00ff00;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.8;
        }
        
        .status-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .status-card:hover {
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
            transform: translateY(-2px);
        }
        
        .status-card h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
        }
        
        .status-active {
            background: #ff0000;
            box-shadow: 0 0 10px #ff0000;
        }
        
        .status-inactive {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-card {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
        }
        
        .control-card h3 {
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.4em;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: transparent;
            border: 2px solid #00ff00;
            color: #00ff00;
            font-size: 1.1em;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #00ff00;
            color: #000;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .btn.danger {
            border-color: #ff0000;
            color: #ff0000;
        }
        
        .btn.danger:hover {
            background: #ff0000;
            color: #000;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
        }
        
        .results-panel {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .results-panel h3 {
            margin-bottom: 15px;
            text-align: center;
        }
        
        .results-content {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #333;
        }
        
        .device-item {
            padding: 10px;
            margin: 5px 0;
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
            border-radius: 3px;
        }
        
        .device-item strong {
            color: #00ff00;
        }
        
        .device-item .signal {
            float: right;
            color: #ffaa00;
        }
        
        .loading {
            text-align: center;
            color: #ffaa00;
            font-style: italic;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .pulse {
            animation: pulse 1s infinite;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            border-top: 1px solid #00ff00;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>C.H.A.O.S</h1>
            <p>Cyber Hacking & Offensive Security Platform</p>
        </div>
        
        <div class="status-panel">
            <div class="status-card">
                <h3>BLE Status</h3>
                <span class="status-indicator" id="bleStatus"></span>
                <span id="bleStatusText">Inactive</span>
                <p id="bleDevicesCount">Devices Found: 0</p>
            </div>
            
            <div class="status-card">
                <h3>WiFi Status</h3>
                <span class="status-indicator" id="wifiStatus"></span>
                <span id="wifiStatusText">Inactive</span>
                <p id="wifiNetworksCount">Networks Found: 0</p>
            </div>
            
            <div class="status-card">
                <h3>System Status</h3>
                <span class="status-indicator status-active"></span>
                <span>Online</span>
                <p id="lastScanTime">Last Scan: Never</p>
            </div>
        </div>
        
        <div class="control-panel">
            <div class="control-card">
                <h3>BLE Operations</h3>
                <button class="btn" onclick="startBLEScan()">Start BLE Scan</button>
                <button class="btn danger" onclick="stopBLEScan()">Stop BLE Scan</button>
                <button class="btn danger" onclick="startBLEJam()">Start BLE Jam</button>
                <button class="btn danger" onclick="stopBLEJam()">Stop BLE Jam</button>
            </div>
            
            <div class="control-card">
                <h3>WiFi Operations</h3>
                <button class="btn" onclick="startWiFiScan()">Start WiFi Scan</button>
                <button class="btn danger" onclick="stopWiFiScan()">Stop WiFi Scan</button>
                <button class="btn danger" onclick="startWiFiJam()">Start WiFi Jam</button>
                <button class="btn danger" onclick="stopWiFiJam()">Stop WiFi Jam</button>
            </div>
        </div>
        
        <div class="results-panel">
            <h3>Scan Results</h3>
            <div class="results-content" id="scanResults">
                <div class="loading">Ready to scan... Select an operation above to begin.</div>
            </div>
        </div>
        
        <div class="footer">
            <p>C.H.A.O.S v1.0 - For Educational Purposes Only</p>
        </div>
    </div>
    
    <script>
        let scanInterval;
        
        function updateStatus() {
            fetch('/api/status')
                .then(response => response.json())
                .then(data => {
                    // Update BLE status
                    const bleStatus = document.getElementById('bleStatus');
                    const bleStatusText = document.getElementById('bleStatusText');
                    const bleDevicesCount = document.getElementById('bleDevicesCount');
                    
                    if (data.bleScanActive || data.bleJamActive) {
                        bleStatus.className = 'status-indicator status-active pulse';
                        bleStatusText.textContent = data.bleJamActive ? 'Jamming' : 'Scanning';
                    } else {
                        bleStatus.className = 'status-indicator status-inactive';
                        bleStatusText.textContent = 'Inactive';
                    }
                    bleDevicesCount.textContent = `Devices Found: ${data.bleDevicesFound}`;
                    
                    // Update WiFi status
                    const wifiStatus = document.getElementById('wifiStatus');
                    const wifiStatusText = document.getElementById('wifiStatusText');
                    const wifiNetworksCount = document.getElementById('wifiNetworksCount');
                    
                    if (data.wifiScanActive || data.wifiJamActive) {
                        wifiStatus.className = 'status-indicator status-active pulse';
                        wifiStatusText.textContent = data.wifiJamActive ? 'Jamming' : 'Scanning';
                    } else {
                        wifiStatus.className = 'status-indicator status-inactive';
                        wifiStatusText.textContent = 'Inactive';
                    }
                    wifiNetworksCount.textContent = `Networks Found: ${data.wifiNetworksFound}`;
                    
                    // Update last scan time
                    document.getElementById('lastScanTime').textContent = `Last Scan: ${data.lastScanTime}`;
                })
                .catch(error => console.error('Error:', error));
        }
        
        function startBLEScan() {
            fetch('/api/ble/scan/start', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    updateResults();
                });
        }
        
        function stopBLEScan() {
            fetch('/api/ble/scan/stop', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    updateResults();
                });
        }
        
        function startBLEJam() {
            fetch('/api/ble/jam/start', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                });
        }
        
        function stopBLEJam() {
            fetch('/api/ble/jam/stop', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                });
        }
        
        function startWiFiScan() {
            fetch('/api/wifi/scan/start', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    updateResults();
                });
        }
        
        function stopWiFiScan() {
            fetch('/api/wifi/scan/stop', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    updateResults();
                });
        }
        
        function startWiFiJam() {
            fetch('/api/wifi/jam/start', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                });
        }
        
        function stopWiFiJam() {
            fetch('/api/wifi/jam/stop', {method: 'POST'})
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                });
        }
        
        function updateResults() {
            fetch('/api/scan/results')
                .then(response => response.json())
                .then(data => {
                    const resultsDiv = document.getElementById('scanResults');
                    resultsDiv.innerHTML = '';
                    
                    if (data.bleDevices && data.bleDevices.length > 0) {
                        resultsDiv.innerHTML += '<h4>BLE Devices:</h4>';
                        data.bleDevices.forEach(device => {
                            const deviceDiv = document.createElement('div');
                            deviceDiv.className = 'device-item';
                            deviceDiv.innerHTML = `
                                <strong>${device.name || 'Unknown'}</strong>
                                <span class="signal">RSSI: ${device.rssi}dBm</span><br>
                                <small>MAC: ${device.address}</small>
                            `;
                            resultsDiv.appendChild(deviceDiv);
                        });
                    }
                    
                    if (data.wifiNetworks && data.wifiNetworks.length > 0) {
                        resultsDiv.innerHTML += '<h4>WiFi Networks:</h4>';
                        data.wifiNetworks.forEach(network => {
                            const networkDiv = document.createElement('div');
                            networkDiv.className = 'device-item';
                            networkDiv.innerHTML = `
                                <strong>${network.ssid || 'Hidden'}</strong>
                                <span class="signal">RSSI: ${network.rssi}dBm</span><br>
                                <small>Channel: ${network.channel} | Encryption: ${network.encryption}</small>
                            `;
                            resultsDiv.appendChild(networkDiv);
                        });
                    }
                    
                    if (!data.bleDevices || data.bleDevices.length === 0) {
                        if (!data.wifiNetworks || data.wifiNetworks.length === 0) {
                            resultsDiv.innerHTML = '<div class="loading">No devices found. Start a scan to discover nearby devices.</div>';
                        }
                    }
                })
                .catch(error => console.error('Error:', error));
        }
        
        // Update status every 2 seconds
        setInterval(updateStatus, 2000);
        
        // Initial status update
        updateStatus();
    </script>
</body>
</html>
